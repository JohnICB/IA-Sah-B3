!function(){"use strict";function oe(e){if("string"!=typeof e)return!1;var n=e.split("-");return 2===n.length&&(!0===ae(n[0])&&!0===ae(n[1]))}function ae(e){return"string"==typeof e&&-1!==e.search(/^[a-h][1-8]$/)}function ie(e){if("string"!=typeof e)return!1;var n=(e=e.replace(/ .+$/,"")).split("/");if(8!==n.length)return!1;for(var r=0;r<8;r++)if(""===n[r]||8<n[r].length||-1!==n[r].search(/[^kqrbnpKQRNBP1-8]/))return!1;return!0}function se(e){if("object"!=typeof e)return!1;for(var n in e)if(!0===e.hasOwnProperty(n)&&(!0!==ae(n)||!0!=("string"==typeof(r=e[n])&&-1!==r.search(/^[bw][KQRNBP]$/))))return!1;var r;return!0}function pe(e){if(!0!==ie(e))return!1;for(var n,r=(e=e.replace(/ .+$/,"")).split("/"),t={},o=8,a=0;a<8;a++){for(var i=r[a].split(""),s=0,p=0;p<i.length;p++){if(-1!==i[p].search(/[1-8]/))s+=parseInt(i[p],10);else t[fe[s]+o]=(n=i[p]).toLowerCase()===n?"b"+n.toUpperCase():"w"+n.toUpperCase(),s++}o--}return t}function ce(e){if(!0!==se(e))return!1;for(var n,r,t="",o=8,a=0;a<8;a++){for(var i=0;i<8;i++){var s=fe[i]+o;!0===e.hasOwnProperty(s)?t+=(n=e[s],r=void 0,"w"===(r=n.split(""))[0]?r[1].toUpperCase():r[1].toLowerCase()):t+="1"}7!==a&&(t+="/"),o--}return t=(t=(t=(t=(t=(t=(t=t.replace(/11111111/g,"8")).replace(/1111111/g,"7")).replace(/111111/g,"6")).replace(/11111/g,"5")).replace(/1111/g,"4")).replace(/111/g,"3")).replace(/11/g,"2")}var fe="abcdefgh".split("");window.ChessBoard=window.ChessBoard||function(n,d){function u(){return"xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx".replace(/x/g,function(e){return(16*Math.random()|0).toString(16)})}function p(e){return JSON.parse(JSON.stringify(e))}function t(e){var n=e.split(".");return{major:parseInt(n[0],10),minor:parseInt(n[1],10),patch:parseInt(n[2],10)}}function a(e,n,r){if(!0===d.hasOwnProperty("showErrors")&&!1!==d.showErrors){var t="ChessBoard Error "+e+": "+n;return"console"===d.showErrors&&"object"==typeof console&&"function"==typeof console.log?(console.log(t),void(2<=arguments.length&&console.log(r))):"alert"===d.showErrors?(r&&(t+="\n\n"+JSON.stringify(r)),void window.alert(t)):void("function"==typeof d.showErrors&&d.showErrors(e,n,r))}}function e(){if("string"==typeof n){if(""===n)return window.alert("ChessBoard Error 1001: The first argument to ChessBoard() cannot be an empty string.\n\nExiting..."),!1;var e=document.getElementById(n);if(!e)return window.alert('ChessBoard Error 1002: Element with id "'+n+'" does not exist in the DOM.\n\nExiting...'),!1;Q=$(e)}else if(1!==(Q=$(n)).length)return window.alert("ChessBoard Error 1003: The first argument to ChessBoard() must be an ID or a single DOM node.\n\nExiting..."),!1;return window.JSON&&"function"==typeof JSON.stringify&&"function"==typeof JSON.parse?(window.$,!(!$.fn||!$.fn.jquery||!0!==function(e,n){e=t(e),n=t(n);var r=1e4*e.major*1e4+1e4*e.minor+e.patch;return 1e4*n.major*1e4+1e4*n.minor+n.patch<=r}($.fn.jquery,W))||(window.alert("ChessBoard Error 1005: Unable to find a valid version of jQuery. Please include jQuery "+W+" or higher on the page.\n\nExiting..."),!1)):(window.alert("ChessBoard Error 1004: JSON does not exist. Please include a JSON polyfill.\n\nExiting..."),!1)}function r(e){return"fast"===e||"slow"===e||parseInt(e,10)+""==e+""&&0<=e}function o(e){return"function"==typeof d.pieceTheme?d.pieceTheme(e):"string"==typeof d.pieceTheme?d.pieceTheme.replace(/{piece}/g,e):(a(8272,"Unable to build image source for cfg.pieceTheme."),"")}function h(e,n,r){var t='<img src="'+o(e)+'" ';return r&&"string"==typeof r&&(t+='id="'+r+'" '),t+='alt="" class="'+H.piece+'" data-piece="'+e+'" style="width: '+L+"px;height: "+L+"px;",!0===n&&(t+="display:none;"),t+='" />'}function i(e){var n=["wK","wQ","wR","wB","wN","wP"];"black"===e&&(n=["bK","bQ","bR","bB","bN","bP"]);for(var r="",t=0;t<n.length;t++)r+=h(n[t],!1,re[n[t]]);return r}function s(e,n,r,t){var o=$("#"+te[e]),a=o.offset(),i=$("#"+te[n]),s=i.offset(),p=u();$("body").append(h(r,!0,p));var c=$("#"+p);c.css({display:"",position:"absolute",top:a.top,left:a.left}),o.find("."+H.piece).remove();var f={duration:d.moveSpeed,complete:function(){i.append(h(r)),c.remove(),"function"==typeof t&&t()}};c.animate(s,f)}function c(e,n,r){var t=$("#"+re[e]).offset(),o=$("#"+te[n]),a=o.offset(),i=u();$("body").append(h(e,!0,i));var s=$("#"+i);s.css({display:"",position:"absolute",left:t.left,top:t.top});var p={duration:d.moveSpeed,complete:function(){o.find("."+H.piece).remove(),o.append(h(e)),s.remove(),"function"==typeof r&&r()}};s.animate(a,p)}function f(e,n){e=e.split("");var r=fe.indexOf(e[0])+1,t=parseInt(e[1],10);n=n.split("");var o=fe.indexOf(n[0])+1,a=parseInt(n[1],10),i=Math.abs(r-o),s=Math.abs(t-a);return s<=i?i:s}function l(e,n,r){for(var t=function(e){for(var n=[],r=0;r<8;r++)for(var t=0;t<8;t++){var o=fe[r]+(t+1);e!==o&&n.push({square:o,distance:f(e,o)})}n.sort(function(e,n){return e.distance-n.distance});var a=[];for(r=0;r<n.length;r++)a.push(n[r].square);return a}(r),o=0;o<t.length;o++){var a=t[o];if(!0===e.hasOwnProperty(a)&&e[a]===n)return a}return!1}function v(){for(var e in X.find("."+H.piece).remove(),ee)!0===ee.hasOwnProperty(e)&&$("#"+te[e]).append(h(ee[e]))}function g(){X.html(function(e){"black"!==e&&(e="white");var n="",r=p(fe),t=8;"black"===e&&(r.reverse(),t=1);for(var o="white",a=0;a<8;a++){n+='<div class="'+H.row+'">';for(var i=0;i<8;i++){var s=r[i]+t;n+='<div class="'+H.square+" "+H[o]+" square-"+s+'" style="width: '+L+"px; height: "+L+'px" id="'+te[s]+'" data-square="'+s+'">',!0===d.showNotation&&(("white"===e&&1===t||"black"===e&&8===t)&&(n+='<div class="'+H.notation+" "+H.alpha+'">'+r[i]+"</div>"),0===i&&(n+='<div class="'+H.notation+" "+H.numeric+'">'+t+"</div>")),n+="</div>",o="white"===o?"black":"white"}n+='<div class="'+H.clearfix+'"></div></div>',o="white"===o?"black":"white","white"===e?t--:t++}return n}(_)),v(),!0===d.sparePieces&&("white"===_?(R.html(i("black")),K.html(i("white"))):(R.html(i("white")),K.html(i("black"))))}function w(e){var n=p(ee),r=p(e);ce(n)!==ce(r)&&(!0===d.hasOwnProperty("onChange")&&"function"==typeof d.onChange&&d.onChange(n,r),ee=e)}function y(e,n){for(var r in F)if(!0===F.hasOwnProperty(r)){var t=F[r];if(e>=t.left&&e<t.left+L&&n>=t.top&&n<t.top+L)return r}return"offboard"}function m(){X.find("."+H.square).removeClass(H.highlight1+" "+H.highlight2)}function b(){m();var e=p(ee);delete e[A],w(e),v(),Y.fadeOut(d.trashSpeed),ne=!1}function P(e,n,r,t){"function"==typeof d.onDragStart&&!1===d.onDragStart(e,n,p(ee),_)||(ne=!0,U=n,z="spare"===(A=e)?"offboard":e,function(){for(var e in F={},te)!0===te.hasOwnProperty(e)&&(F[e]=$("#"+te[e]).offset())}(),Y.attr("src",o(n)).css({display:"",position:"absolute",left:r-L/2,top:t-L/2}),"spare"!==e&&$("#"+te[e]).addClass(H.highlight1).find("."+H.piece).css("display","none"))}function O(e,n){Y.css({left:e-L/2,top:n-L/2});var r=y(e,n);r!==z&&(!0===ae(z)&&$("#"+te[z]).removeClass(H.highlight2),!0===ae(r)&&$("#"+te[r]).addClass(H.highlight2),"function"==typeof d.onDragMove&&d.onDragMove(r,z,A,U,p(ee),_),z=r)}function x(e){var n="drop";if("offboard"===e&&"snapback"===d.dropOffBoard&&(n="snapback"),"offboard"===e&&"trash"===d.dropOffBoard&&(n="trash"),!0===d.hasOwnProperty("onDrop")&&"function"==typeof d.onDrop){var r=p(ee);"spare"===A&&!0===ae(e)&&(r[e]=U),!0===ae(A)&&"offboard"===e&&delete r[A],!0===ae(A)&&!0===ae(e)&&(delete r[A],r[e]=U);var t=p(ee),o=d.onDrop(A,e,U,r,t,_);"snapback"!==o&&"trash"!==o||(n=o)}"snapback"===n?function(){if("spare"!==A){m();var e=$("#"+te[A]).offset(),n={duration:d.snapbackSpeed,complete:function(){v(),Y.css("display","none"),!0===d.hasOwnProperty("onSnapbackEnd")&&"function"==typeof d.onSnapbackEnd&&d.onSnapbackEnd(U,A,p(ee),_)}};Y.animate(e,n),ne=!1}else b()}():"trash"===n?b():"drop"===n&&function(e){m();var n=p(ee);delete n[A],n[e]=U,w(n);var r=$("#"+te[e]).offset(),t={duration:d.snapSpeed,complete:function(){v(),Y.css("display","none"),!0===d.hasOwnProperty("onSnapEnd")&&"function"==typeof d.onSnapEnd&&d.onSnapEnd(A,e,U)}};Y.animate(r,t),ne=!1}(e)}function S(e){e.preventDefault()}function E(e){if(!0===d.draggable){var n=$(this).attr("data-square");!0===ae(n)&&!0===ee.hasOwnProperty(n)&&P(n,ee[n],e.pageX,e.pageY)}}function q(e){if(!0===d.draggable){var n=$(this).attr("data-square");!0===ae(n)&&!0===ee.hasOwnProperty(n)&&(e=e.originalEvent,P(n,ee[n],e.changedTouches[0].pageX,e.changedTouches[0].pageY))}}function k(e){!0===d.sparePieces&&P("spare",$(this).attr("data-piece"),e.pageX,e.pageY)}function B(e){!0===d.sparePieces&&P("spare",$(this).attr("data-piece"),(e=e.originalEvent).changedTouches[0].pageX,e.changedTouches[0].pageY)}function C(e){!0===ne&&O(e.pageX,e.pageY)}function T(e){!0===ne&&(e.preventDefault(),O(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY))}function N(e){!0===ne&&x(y(e.pageX,e.pageY))}function I(e){!0===ne&&x(y(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY))}function M(e){if(!1===ne&&!0===d.hasOwnProperty("onMouseoverSquare")&&"function"==typeof d.onMouseoverSquare){var n=$(e.currentTarget).attr("data-square");if(!0===ae(n)){var r=!1;!0===ee.hasOwnProperty(n)&&(r=ee[n]),d.onMouseoverSquare(n,r,p(ee),_)}}}function D(e){if(!1===ne&&!0===d.hasOwnProperty("onMouseoutSquare")&&"function"==typeof d.onMouseoutSquare){var n=$(e.currentTarget).attr("data-square");if(!0===ae(n)){var r=!1;!0===ee.hasOwnProperty(n)&&(r=ee[n]),d.onMouseoutSquare(n,r,p(ee),_)}}}function j(){$("body").on("mousedown mousemove","."+H.piece,S),X.on("mousedown","."+H.square,E),Q.on("mousedown","."+H.sparePieces+" ."+H.piece,k),X.on("mouseenter","."+H.square,M),X.on("mouseleave","."+H.square,D),!0===(navigator&&navigator.userAgent&&-1!==navigator.userAgent.search(/MSIE/))?(document.ondragstart=function(){return!1},$("body").on("mousemove",C),$("body").on("mouseup",N)):($(window).on("mousemove",C),$(window).on("mouseup",N)),"ontouchstart"in document.documentElement==!0&&(X.on("touchstart","."+H.square,q),Q.on("touchstart","."+H.sparePieces+" ."+H.piece,B),$(window).on("touchmove",T),$(window).on("touchend",I))}function J(){var e;Q.html((e='<div class="'+H.chessboard+'">',!0===d.sparePieces&&(e+='<div class="'+H.sparePieces+" "+H.sparePiecesTop+'"></div>'),e+='<div class="'+H.board+'"></div>',!0===d.sparePieces&&(e+='<div class="'+H.sparePieces+" "+H.sparePiecesBottom+'"></div>'),e+="</div>")),X=Q.find("."+H.board),!0===d.sparePieces&&(R=Q.find("."+H.sparePiecesTop),K=Q.find("."+H.sparePiecesBottom));var n=u();$("body").append(h("wP",!0,n)),Y=$("#"+n),Z=parseInt(X.css("borderLeftWidth"),10),V.resize()}d=d||{};var Q,X,Y,R,K,L,U,z,A,F,W="1.7.0",G=pe("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR"),H={alpha:"alpha-d2270",black:"black-3c85d",board:"board-b72b1",chessboard:"chessboard-63f37",clearfix:"clearfix-7da63",highlight1:"highlight1-32417",highlight2:"highlight2-9c5d2",notation:"notation-322f9",numeric:"numeric-fc462",piece:"piece-417db",row:"row-5277c",sparePieces:"spare-pieces-7492f",sparePiecesBottom:"spare-pieces-bottom-ae20f",sparePiecesTop:"spare-pieces-top-4028b",square:"square-55d63",white:"white-1e1d7"},V={},Z=2,_="white",ee={},ne=!1,re={},te={};return V.clear=function(e){V.position({},e)},V.destroy=function(){Q.html(""),Y.remove(),Q.unbind()},V.fen=function(){return V.position("fen")},V.flip=function(){V.orientation("flip")},V.move=function(){if(0!==arguments.length){for(var e=!0,n={},r=0;r<arguments.length;r++)if(!1!==arguments[r])if(!0===oe(arguments[r])){var t=arguments[r].split("-");n[t[0]]=t[1]}else a(2826,"Invalid move passed to the move method.",arguments[r]);else e=!1;var o=function(e,n){for(var r in e=p(e),n)if(!0===n.hasOwnProperty(r)&&!0===e.hasOwnProperty(r)){var t=e[r];delete e[r],e[n[r]]=t}return e}(ee,n);return V.position(o,e),o}},V.orientation=function(e){return 0===arguments.length?_:"white"===e||"black"===e?(_=e,void g()):"flip"===e?(_="white"===_?"black":"white",void g()):void a(5482,"Invalid value passed to the orientation method.",e)},V.position=function(e,n){return 0===arguments.length?p(ee):"string"==typeof e&&"fen"===e.toLowerCase()?ce(ee):(!1!==n&&(n=!0),"string"==typeof e&&"start"===e.toLowerCase()&&(e=p(G)),!0===ie(e)&&(e=pe(e)),void(!0===se(e)?!0===n?(!function(e,n,r){function t(){++o===e.length&&(v(),!!1===d.hasOwnProperty("onMoveEnd")&&"function"==typeof d.onMoveEnd&&d.onMoveEnd(p(n),p(r)))}!0;for(var o=0,a=0;a<e.length;a++)"clear"===e[a].type&&$("#"+te[e[a].square]+" ."+H.piece).fadeOut(d.trashSpeed,t),"add"===e[a].type&&!0!==d.sparePieces&&$("#"+te[e[a].square]).append(h(e[a].piece,!0)).find("."+H.piece).fadeIn(d.appearSpeed,t),"add"===e[a].type&&!0===d.sparePieces&&c(e[a].piece,e[a].square,t),"move"===e[a].type&&s(e[a].source,e[a].destination,e[a].piece,t)}(function(e,n){e=p(e),n=p(n);var r=[],t={};for(var o in n)!0===n.hasOwnProperty(o)&&!0===e.hasOwnProperty(o)&&e[o]===n[o]&&(delete e[o],delete n[o]);for(var o in n)if(!0===n.hasOwnProperty(o)){var a=l(e,n[o],o);!1!==a&&(r.push({type:"move",source:a,destination:o,piece:n[o]}),delete e[a],delete n[o],t[o]=!0)}for(var o in n)!0===n.hasOwnProperty(o)&&(r.push({type:"add",square:o,piece:n[o]}),delete n[o]);for(var o in e)!0===e.hasOwnProperty(o)&&!0!==t.hasOwnProperty(o)&&(r.push({type:"clear",square:o,piece:e[o]}),delete e[o]);return r}(ee,e),ee,e),w(e)):(w(e),v()):a(6482,"Invalid value passed to the position method.",e)))},V.resize=function(){L=function(){var e=parseInt(Q.css("width"),10);if(!e||e<=0)return 0;for(var n=e-1;n%8!=0&&0<n;)n--;return n/8}(),X.css("width",8*L+"px"),Y.css({height:L,width:L}),!0===d.sparePieces&&Q.find("."+H.sparePieces).css("paddingLeft",L+Z+"px"),g()},V.start=function(e){V.position("start",e)},!0===e()&&1==("string"!=typeof d&&!0!==se(d)||(d={position:d}),"black"!==d.orientation&&(d.orientation="white"),_=d.orientation,!1!==d.showNotation&&(d.showNotation=!0),!0!==d.draggable&&(d.draggable=!1),"trash"!==d.dropOffBoard&&(d.dropOffBoard="snapback"),!0!==d.sparePieces&&(d.sparePieces=!1),!0===d.sparePieces&&(d.draggable=!0),(!0!==d.hasOwnProperty("pieceTheme")||"string"!=typeof d.pieceTheme&&"function"!=typeof d.pieceTheme)&&(d.pieceTheme="../assets/img/vendor/chesspieces/wikipedia/{piece}.png"),!0===d.hasOwnProperty("appearSpeed")&&!0===r(d.appearSpeed)||(d.appearSpeed=200),!0===d.hasOwnProperty("moveSpeed")&&!0===r(d.moveSpeed)||(d.moveSpeed=200),!0===d.hasOwnProperty("snapbackSpeed")&&!0===r(d.snapbackSpeed)||(d.snapbackSpeed=50),!0===d.hasOwnProperty("snapSpeed")&&!0===r(d.snapSpeed)||(d.snapSpeed=25),!0===d.hasOwnProperty("trashSpeed")&&!0===r(d.trashSpeed)||(d.trashSpeed=100),!0===d.hasOwnProperty("position")&&("start"===d.position?ee=p(G):!0===ie(d.position)?ee=pe(d.position):!0===se(d.position)?ee=p(d.position):a(7263,"Invalid value passed to config.position.",d.position)),!0)&&(function(){for(var e=0;e<fe.length;e++)for(var n=1;n<=8;n++){var r=fe[e]+n;te[r]=r+"-"+u()}var t="KQRBNP".split("");for(e=0;e<t.length;e++){var o="w"+t[e],a="b"+t[e];re[o]=o+"-"+u(),re[a]=a+"-"+u()}}(),J(),j()),V},window.ChessBoard.fenToObj=pe,window.ChessBoard.objToFen=ce}();